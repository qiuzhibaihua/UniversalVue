{"remainingRequest":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/menu/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/menu/index.vue","mtime":1584947585008},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TableTreeColumn from \"@/views/sys/menu/components/table-tree-column\";\nimport AddOrUpdate from \"./components/menu-add-or-update\";\nimport { treeDataTranslate } from \"@/utils\";\nimport { menuList, menuDelete } from \"@/api/sys\";\nexport default {\n  data: function data() {\n    return {\n      dataForm: {},\n      dataList: [],\n      dataListLoading: false,\n      addOrUpdateVisible: false\n    };\n  },\n  components: {\n    TableTreeColumn: TableTreeColumn,\n    AddOrUpdate: AddOrUpdate\n  },\n  // activated() {\n  //   this.getDataList();\n  // },\n  methods: {\n    // 获取数据列表\n    getDataList: function () {\n      var _getDataList = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.dataListLoading = true;\n                _context.next = 3;\n                return menuList();\n\n              case 3:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.dataList = treeDataTranslate(data, \"menuId\");\n                this.dataListLoading = false;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getDataList() {\n        return _getDataList.apply(this, arguments);\n      }\n\n      return getDataList;\n    }(),\n    // 新增 / 修改\n    addOrUpdateHandle: function addOrUpdateHandle(id) {\n      var _this = this;\n\n      this.addOrUpdateVisible = true;\n      this.$nextTick(function () {\n        _this.$refs.addOrUpdate.init(id);\n      });\n    },\n    // 删除\n    deleteHandle: function deleteHandle(id) {\n      var _this2 = this;\n\n      this.$confirm(\"\\u786E\\u5B9A\\u8FDB\\u884C\\u5220\\u9664\\u64CD\\u4F5C?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _ref3, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return menuDelete(\"/sys/menu/delete/\".concat(id));\n\n              case 2:\n                _ref3 = _context2.sent;\n                data = _ref3.data;\n\n                if (data && data.code === 0) {\n                  _this2.$message({\n                    message: \"操作成功\",\n                    type: \"success\",\n                    duration: 1500,\n                    onClose: function onClose() {\n                      _this2.getDataList();\n                    }\n                  });\n                } else {\n                  _this2.$message.error(data.msg);\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }))).catch(function () {});\n    }\n  },\n  mounted: function mounted() {\n    this.getDataList();\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA,OAAA,eAAA,MAAA,+CAAA;AACA,OAAA,WAAA;AACA,SAAA,iBAAA,QAAA,SAAA;AACA,SAAA,QAAA,EAAA,UAAA,QAAA,WAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,eAAA,EAAA,KAHA;AAIA,MAAA,kBAAA,EAAA;AAJA,KAAA;AAMA,GARA;AASA,EAAA,UAAA,EAAA;AACA,IAAA,eAAA,EAAA,eADA;AAEA,IAAA,WAAA,EAAA;AAFA,GATA;AAaA;AACA;AACA;AACA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,WAFA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAGA,qBAAA,eAAA,GAAA,IAAA;AAHA;AAAA,uBAIA,QAAA,EAJA;;AAAA;AAAA;AAIA,gBAAA,IAJA,QAIA,IAJA;AAKA,qBAAA,QAAA,GAAA,iBAAA,CAAA,IAAA,EAAA,QAAA,CAAA;AACA,qBAAA,eAAA,GAAA,KAAA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAQA;AACA,IAAA,iBATA,6BASA,EATA,EASA;AAAA;;AACA,WAAA,kBAAA,GAAA,IAAA;AACA,WAAA,SAAA,CAAA,YAAA;AACA,QAAA,KAAA,CAAA,KAAA,CAAA,WAAA,CAAA,IAAA,CAAA,EAAA;AACA,OAFA;AAGA,KAdA;AAeA;AACA,IAAA,YAhBA,wBAgBA,EAhBA,EAgBA;AAAA;;AACA,WAAA,QAAA,sDAAA,IAAA,EAAA;AACA,QAAA,iBAAA,EAAA,IADA;AAEA,QAAA,gBAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA;AAHA,OAAA,EAKA,IALA,uEAKA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,UAAA,4BAAA,EAAA,EADA;;AAAA;AAAA;AACA,gBAAA,IADA,SACA,IADA;;AAEA,oBAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,kBAAA,MAAA,CAAA,QAAA,CAAA;AACA,oBAAA,OAAA,EAAA,MADA;AAEA,oBAAA,IAAA,EAAA,SAFA;AAGA,oBAAA,QAAA,EAAA,IAHA;AAIA,oBAAA,OAAA,EAAA,mBAAA;AACA,sBAAA,MAAA,CAAA,WAAA;AACA;AANA,mBAAA;AAQA,iBATA,MASA;AACA,kBAAA,MAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AACA;;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OALA,IAoBA,KApBA,CAoBA,YAAA,CAAA,CApBA;AAqBA;AAtCA,GAhBA;AAwDA,EAAA,OAxDA,qBAwDA;AACA,SAAA,WAAA;AACA;AA1DA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :inline=\"true\" :model=\"dataForm\" size=\"small\">\n      <el-form-item>\n        <el-button v-if=\"isAuth('sys:user:save')\" type=\"primary\" @click=\"addOrUpdateHandle()\">新增</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table\n      v-loading=\"dataListLoading\"\n      :data=\"dataList\"\n      border\n      style=\"width: 100%;\"\n      size=\"small\">\n      <table-tree-column\n        prop=\"name\"\n        header-align=\"center\"\n        treeKey=\"menuId\"\n        width=\"150\"\n        label=\"名称\">\n      </table-tree-column>\n      <el-table-column\n        prop=\"parentName\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"120\"\n        label=\"上级菜单\">\n      </el-table-column>\n      <el-table-column\n        header-align=\"center\"\n        align=\"center\"\n        label=\"图标\">\n        <template slot-scope=\"scope\">\n          <svg-icon :icon-class=\"scope.row.icon || ''\"></svg-icon>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"type\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"类型\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.type === 0\" size=\"small\">目录</el-tag>\n          <el-tag v-else-if=\"scope.row.type === 1\" size=\"small\" type=\"success\">菜单</el-tag>\n          <el-tag v-else-if=\"scope.row.type === 2\" size=\"small\" type=\"info\">按钮</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"orderNum\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"排序号\">\n      </el-table-column>\n      <el-table-column\n        prop=\"url\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        :show-overflow-tooltip=\"true\"\n        label=\"菜单URL\">\n      </el-table-column>\n      <el-table-column\n        prop=\"perms\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        :show-overflow-tooltip=\"true\"\n        label=\"授权标识\">\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\" @click=\"addOrUpdateHandle(scope.row.menuId)\">修改</el-button>\n          <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row.menuId)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 弹窗, 新增 / 修改 -->\n    <add-or-update v-if=\"addOrUpdateVisible\" ref=\"addOrUpdate\" @refreshDataList=\"getDataList\"></add-or-update>\n  </div>\n</template>\n\n<script>\nimport TableTreeColumn from \"@/views/sys/menu/components/table-tree-column\";\nimport AddOrUpdate from \"./components/menu-add-or-update\";\nimport { treeDataTranslate } from \"@/utils\";\nimport { menuList, menuDelete } from \"@/api/sys\";\n\nexport default {\n  data() {\n    return {\n      dataForm: {},\n      dataList: [],\n      dataListLoading: false,\n      addOrUpdateVisible: false\n    };\n  },\n  components: {\n    TableTreeColumn,\n    AddOrUpdate\n  },\n  // activated() {\n  //   this.getDataList();\n  // },\n  methods: {\n    // 获取数据列表\n    async getDataList() {\n      this.dataListLoading = true;\n      const { data } = await menuList();\n      this.dataList = treeDataTranslate(data, \"menuId\");\n      this.dataListLoading = false;\n    },\n    // 新增 / 修改\n    addOrUpdateHandle(id) {\n      this.addOrUpdateVisible = true;\n      this.$nextTick(() => {\n        this.$refs.addOrUpdate.init(id);\n      });\n    },\n    // 删除\n    deleteHandle(id) {\n      this.$confirm(`确定进行删除操作?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(async () => {\n          const { data } = await menuDelete(`/sys/menu/delete/${id}`);\n          if (data && data.code === 0) {\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.getDataList();\n              }\n            });\n          } else {\n            this.$message.error(data.msg);\n          }\n        })\n        .catch(() => {});\n    }\n  },\n  mounted() {\n    this.getDataList();\n  }\n};\n</script>\n"],"sourceRoot":"src/views/sys/menu"}]}