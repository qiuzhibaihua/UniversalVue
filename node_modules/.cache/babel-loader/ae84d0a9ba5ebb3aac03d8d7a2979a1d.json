{"remainingRequest":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/job/components/schedule-add-or-update.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/job/components/schedule-add-or-update.vue","mtime":1584947585005},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { jobInfo, jobDataFormSubmit } from \"@/api/sys\";\nexport default {\n  data: function data() {\n    return {\n      visible: false,\n      dataForm: {\n        id: 0,\n        beanName: \"\",\n        methodName: \"\",\n        params: \"\",\n        cronExpression: \"\",\n        remark: \"\",\n        status: 0\n      },\n      dataRule: {\n        beanName: [{\n          required: true,\n          message: \"用户名不能为空\",\n          trigger: \"blur\"\n        }],\n        methodName: [{\n          required: true,\n          message: \"方法名称不能为空\",\n          trigger: \"blur\"\n        }],\n        cronExpression: [{\n          required: true,\n          message: \"cron表达式不能为空\",\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  methods: {\n    init: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(id) {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.dataForm.id = id || 0;\n                this.visible = true;\n                this.$nextTick( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n                  var _ref2, data;\n\n                  return regeneratorRuntime.wrap(function _callee$(_context) {\n                    while (1) {\n                      switch (_context.prev = _context.next) {\n                        case 0:\n                          _this.$refs[\"dataForm\"].resetFields();\n\n                          if (!_this.dataForm.id) {\n                            _context.next = 7;\n                            break;\n                          }\n\n                          _context.next = 4;\n                          return jobInfo(\"/sys/schedule/info/\".concat(_this.dataForm.id));\n\n                        case 4:\n                          _ref2 = _context.sent;\n                          data = _ref2.data;\n\n                          if (data && data.code === 0) {\n                            _this.dataForm.beanName = data.schedule.beanName;\n                            _this.dataForm.methodName = data.schedule.methodName;\n                            _this.dataForm.params = data.schedule.params;\n                            _this.dataForm.cronExpression = data.schedule.cronExpression;\n                            _this.dataForm.remark = data.schedule.remark;\n                            _this.dataForm.status = data.schedule.status;\n                          } // this.$http({\n                          //   url: this.$http.adornUrl(`/sys/schedule/info/${this.dataForm.id}`),\n                          //   method: \"get\",\n                          //   params: this.$http.adornParams()\n                          // }).then(({ data }) => {\n                          //   if (data && data.code === 0) {\n                          //     this.dataForm.beanName = data.schedule.beanName;\n                          //     this.dataForm.methodName = data.schedule.methodName;\n                          //     this.dataForm.params = data.schedule.params;\n                          //     this.dataForm.cronExpression = data.schedule.cronExpression;\n                          //     this.dataForm.remark = data.schedule.remark;\n                          //     this.dataForm.status = data.schedule.status;\n                          //   }\n                          // });\n\n\n                        case 7:\n                        case \"end\":\n                          return _context.stop();\n                      }\n                    }\n                  }, _callee);\n                })));\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    // 表单提交\n    dataFormSubmit: function dataFormSubmit() {\n      var _this2 = this;\n\n      this.$refs[\"dataForm\"].validate( /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(valid) {\n          var params, _ref4, data;\n\n          return regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!valid) {\n                    _context3.next = 7;\n                    break;\n                  }\n\n                  params = {\n                    jobId: _this2.dataForm.id || undefined,\n                    beanName: _this2.dataForm.beanName,\n                    methodName: _this2.dataForm.methodName,\n                    params: _this2.dataForm.params,\n                    cronExpression: _this2.dataForm.cronExpression,\n                    remark: _this2.dataForm.remark,\n                    status: !_this2.dataForm.id ? undefined : _this2.dataForm.status\n                  };\n                  _context3.next = 4;\n                  return jobDataFormSubmit(\"/sys/schedule/\".concat(!_this2.dataForm.id ? \"save\" : \"update\"), params);\n\n                case 4:\n                  _ref4 = _context3.sent;\n                  data = _ref4.data;\n\n                  if (data && data.code === 0) {\n                    _this2.$message({\n                      message: \"操作成功\",\n                      type: \"success\",\n                      duration: 1500,\n                      onClose: function onClose() {\n                        _this2.visible = false;\n\n                        _this2.$emit(\"refreshDataList\");\n                      }\n                    });\n                  } else {\n                    _this2.$message.error(data.msg);\n                  } // this.$http({\n                  //   url: this.$http.adornUrl(\n                  //     `/sys/schedule/${!this.dataForm.id ? \"save\" : \"update\"}`\n                  //   ),\n                  //   method: \"post\",\n                  //   data: this.$http.adornData({\n                  //     jobId: this.dataForm.id || undefined,\n                  //     beanName: this.dataForm.beanName,\n                  //     methodName: this.dataForm.methodName,\n                  //     params: this.dataForm.params,\n                  //     cronExpression: this.dataForm.cronExpression,\n                  //     remark: this.dataForm.remark,\n                  //     status: !this.dataForm.id ? undefined : this.dataForm.status\n                  //   })\n                  // }).then(({ data }) => {\n                  //   if (data && data.code === 0) {\n                  //     this.$message({\n                  //       message: \"操作成功\",\n                  //       type: \"success\",\n                  //       duration: 1500,\n                  //       onClose: () => {\n                  //         this.visible = false;\n                  //         this.$emit(\"refreshDataList\");\n                  //       }\n                  //     });\n                  //   } else {\n                  //     this.$message.error(data.msg);\n                  //   }\n                  // });\n\n\n                case 7:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function (_x2) {\n          return _ref3.apply(this, arguments);\n        };\n      }());\n    }\n  }\n};",{"version":3,"sources":["schedule-add-or-update.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <el-dialog\n    :title=\"!dataForm.id ? '新增' : '修改'\"\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"visible\">\n    <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"dataFormSubmit()\" label-width=\"100px\" size=\"small\">\n      <el-form-item label=\"bean名称\" prop=\"beanName\">\n        <el-input v-model=\"dataForm.beanName\" placeholder=\"spring bean名称, 如: testTask\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"方法名称\" prop=\"methodName\">\n        <el-input v-model=\"dataForm.methodName\" placeholder=\"方法名称\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"参数\" prop=\"params\">\n        <el-input v-model=\"dataForm.params\" placeholder=\"参数\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"cron表达式\" prop=\"cronExpression\">\n        <el-input v-model=\"dataForm.cronExpression\" placeholder=\"如: 0 0 12 * * ?\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"remark\">\n        <el-input v-model=\"dataForm.remark\" placeholder=\"备注\"></el-input>\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\" size=\"small\">取消</el-button>\n      <el-button type=\"primary\" @click=\"dataFormSubmit()\" size=\"small\">确定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { jobInfo, jobDataFormSubmit } from \"@/api/sys\";\nexport default {\n  data() {\n    return {\n      visible: false,\n      dataForm: {\n        id: 0,\n        beanName: \"\",\n        methodName: \"\",\n        params: \"\",\n        cronExpression: \"\",\n        remark: \"\",\n        status: 0\n      },\n      dataRule: {\n        beanName: [\n          { required: true, message: \"用户名不能为空\", trigger: \"blur\" }\n        ],\n        methodName: [\n          { required: true, message: \"方法名称不能为空\", trigger: \"blur\" }\n        ],\n        cronExpression: [\n          { required: true, message: \"cron表达式不能为空\", trigger: \"blur\" }\n        ]\n      }\n    };\n  },\n  methods: {\n    async init(id) {\n      this.dataForm.id = id || 0;\n      this.visible = true;\n      this.$nextTick(async () => {\n        this.$refs[\"dataForm\"].resetFields();\n        if (this.dataForm.id) {\n          const { data } = await jobInfo(\n            `/sys/schedule/info/${this.dataForm.id}`\n          );\n          if (data && data.code === 0) {\n            this.dataForm.beanName = data.schedule.beanName;\n            this.dataForm.methodName = data.schedule.methodName;\n            this.dataForm.params = data.schedule.params;\n            this.dataForm.cronExpression = data.schedule.cronExpression;\n            this.dataForm.remark = data.schedule.remark;\n            this.dataForm.status = data.schedule.status;\n          }\n\n          // this.$http({\n          //   url: this.$http.adornUrl(`/sys/schedule/info/${this.dataForm.id}`),\n          //   method: \"get\",\n          //   params: this.$http.adornParams()\n          // }).then(({ data }) => {\n          //   if (data && data.code === 0) {\n          //     this.dataForm.beanName = data.schedule.beanName;\n          //     this.dataForm.methodName = data.schedule.methodName;\n          //     this.dataForm.params = data.schedule.params;\n          //     this.dataForm.cronExpression = data.schedule.cronExpression;\n          //     this.dataForm.remark = data.schedule.remark;\n          //     this.dataForm.status = data.schedule.status;\n          //   }\n          // });\n        }\n      });\n    },\n    // 表单提交\n    dataFormSubmit() {\n      this.$refs[\"dataForm\"].validate(async valid => {\n        if (valid) {\n          const params = {\n            jobId: this.dataForm.id || undefined,\n            beanName: this.dataForm.beanName,\n            methodName: this.dataForm.methodName,\n            params: this.dataForm.params,\n            cronExpression: this.dataForm.cronExpression,\n            remark: this.dataForm.remark,\n            status: !this.dataForm.id ? undefined : this.dataForm.status\n          };\n          const { data } = await jobDataFormSubmit(\n            `/sys/schedule/${!this.dataForm.id ? \"save\" : \"update\"}`,\n            params\n          );\n          if (data && data.code === 0) {\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.visible = false;\n                this.$emit(\"refreshDataList\");\n              }\n            });\n          } else {\n            this.$message.error(data.msg);\n          }\n\n          // this.$http({\n          //   url: this.$http.adornUrl(\n          //     `/sys/schedule/${!this.dataForm.id ? \"save\" : \"update\"}`\n          //   ),\n          //   method: \"post\",\n          //   data: this.$http.adornData({\n          //     jobId: this.dataForm.id || undefined,\n          //     beanName: this.dataForm.beanName,\n          //     methodName: this.dataForm.methodName,\n          //     params: this.dataForm.params,\n          //     cronExpression: this.dataForm.cronExpression,\n          //     remark: this.dataForm.remark,\n          //     status: !this.dataForm.id ? undefined : this.dataForm.status\n          //   })\n          // }).then(({ data }) => {\n          //   if (data && data.code === 0) {\n          //     this.$message({\n          //       message: \"操作成功\",\n          //       type: \"success\",\n          //       duration: 1500,\n          //       onClose: () => {\n          //         this.visible = false;\n          //         this.$emit(\"refreshDataList\");\n          //       }\n          //     });\n          //   } else {\n          //     this.$message.error(data.msg);\n          //   }\n          // });\n        }\n      });\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/sys/job/components"}]}