{"remainingRequest":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/oss/oss-upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/oss/oss-upload.vue","mtime":1584947585009},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getToken } from \"@/utils/auth\";\nexport default {\n  data: function data() {\n    return {\n      visible: false,\n      url: \"\",\n      num: 0,\n      successNum: 0,\n      fileList: []\n    };\n  },\n  methods: {\n    init: function init(id) {\n      this.url = \"/api/sys/oss/upload?token=\".concat(getToken());\n      this.visible = true;\n    },\n    // 上传之前\n    beforeUploadHandle: function beforeUploadHandle(file) {\n      if (file.type !== \"image/jpg\" && file.type !== \"image/jpeg\" && file.type !== \"image/png\" && file.type !== \"image/gif\") {\n        this.$message.error(\"只支持jpg、png、gif格式的图片！\");\n        return false;\n      }\n\n      this.num++;\n    },\n    // 上传成功\n    successHandle: function successHandle(response, file, fileList) {\n      var _this = this;\n\n      this.fileList = fileList;\n      this.successNum++;\n\n      if (response && response.code === 0) {\n        if (this.num === this.successNum) {\n          this.$confirm(\"操作成功, 是否继续操作?\", \"提示\", {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\"\n          }).catch(function () {\n            _this.visible = false;\n          });\n        }\n      } else {\n        this.$message.error(response.msg);\n      }\n    },\n    // 弹窗关闭时\n    closeHandle: function closeHandle() {\n      this.fileList = [];\n      this.$emit(\"refreshDataList\");\n    }\n  }\n};",{"version":3,"sources":["oss-upload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAsBA,SAAA,QAAA,QAAA,cAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,GAAA,EAAA,EAFA;AAGA,MAAA,GAAA,EAAA,CAHA;AAIA,MAAA,UAAA,EAAA,CAJA;AAKA,MAAA,QAAA,EAAA;AALA,KAAA;AAOA,GATA;AAUA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,EADA,EACA;AACA,WAAA,GAAA,uCAAA,QAAA,EAAA;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KAJA;AAKA;AACA,IAAA,kBANA,8BAMA,IANA,EAMA;AACA,UACA,IAAA,CAAA,IAAA,KAAA,WAAA,IACA,IAAA,CAAA,IAAA,KAAA,YADA,IAEA,IAAA,CAAA,IAAA,KAAA,WAFA,IAGA,IAAA,CAAA,IAAA,KAAA,WAJA,EAKA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,sBAAA;AACA,eAAA,KAAA;AACA;;AACA,WAAA,GAAA;AACA,KAjBA;AAkBA;AACA,IAAA,aAnBA,yBAmBA,QAnBA,EAmBA,IAnBA,EAmBA,QAnBA,EAmBA;AAAA;;AACA,WAAA,QAAA,GAAA,QAAA;AACA,WAAA,UAAA;;AACA,UAAA,QAAA,IAAA,QAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,YAAA,KAAA,GAAA,KAAA,KAAA,UAAA,EAAA;AACA,eAAA,QAAA,CAAA,eAAA,EAAA,IAAA,EAAA;AACA,YAAA,iBAAA,EAAA,IADA;AAEA,YAAA,gBAAA,EAAA,IAFA;AAGA,YAAA,IAAA,EAAA;AAHA,WAAA,EAIA,KAJA,CAIA,YAAA;AACA,YAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,WANA;AAOA;AACA,OAVA,MAUA;AACA,aAAA,QAAA,CAAA,KAAA,CAAA,QAAA,CAAA,GAAA;AACA;AACA,KAnCA;AAoCA;AACA,IAAA,WArCA,yBAqCA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,iBAAA;AACA;AAxCA;AAVA,CAAA","sourcesContent":["<template>\n  <el-dialog\n    title=\"上传文件\"\n    :close-on-click-modal=\"false\"\n    @close=\"closeHandle\"\n    :visible.sync=\"visible\">\n    <el-upload\n      drag\n      :action=\"url\"\n      :before-upload=\"beforeUploadHandle\"\n      :on-success=\"successHandle\"\n      multiple\n      :file-list=\"fileList\"\n      style=\"text-align: center;\">\n      <i class=\"el-icon-upload\"></i>\n      <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n      <div class=\"el-upload__tip\" slot=\"tip\">只支持jpg、png、gif格式的图片！</div>\n    </el-upload>\n  </el-dialog>\n</template>\n\n<script>\nimport { getToken } from \"@/utils/auth\";\nexport default {\n  data() {\n    return {\n      visible: false,\n      url: \"\",\n      num: 0,\n      successNum: 0,\n      fileList: []\n    };\n  },\n  methods: {\n    init(id) {\n      this.url = `/api/sys/oss/upload?token=${getToken()}`;\n      this.visible = true;\n    },\n    // 上传之前\n    beforeUploadHandle(file) {\n      if (\n        file.type !== \"image/jpg\" &&\n        file.type !== \"image/jpeg\" &&\n        file.type !== \"image/png\" &&\n        file.type !== \"image/gif\"\n      ) {\n        this.$message.error(\"只支持jpg、png、gif格式的图片！\");\n        return false;\n      }\n      this.num++;\n    },\n    // 上传成功\n    successHandle(response, file, fileList) {\n      this.fileList = fileList;\n      this.successNum++;\n      if (response && response.code === 0) {\n        if (this.num === this.successNum) {\n          this.$confirm(\"操作成功, 是否继续操作?\", \"提示\", {\n            confirmButtonText: \"确定\",\n            cancelButtonText: \"取消\",\n            type: \"warning\"\n          }).catch(() => {\n            this.visible = false;\n          });\n        }\n      } else {\n        this.$message.error(response.msg);\n      }\n    },\n    // 弹窗关闭时\n    closeHandle() {\n      this.fileList = [];\n      this.$emit(\"refreshDataList\");\n    }\n  }\n};\n</script>\n"],"sourceRoot":"src/views/sys/oss"}]}