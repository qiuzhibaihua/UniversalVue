{"remainingRequest":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/oss/oss-config.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/oss/oss-config.vue","mtime":1584947585009},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ossConfig, ossSaveConfig } from \"@/api/sys\";\nexport default {\n  data: function data() {\n    return {\n      visible: false,\n      dataForm: {},\n      dataRule: {}\n    };\n  },\n  methods: {\n    init: function () {\n      var _init = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(id) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.visible = true;\n                _context.next = 3;\n                return ossConfig();\n\n              case 3:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.dataForm = data && data.code === 0 ? data.config : []; // this.$http({\n                //   url: this.$http.adornUrl(\"/sys/oss/config\"),\n                //   method: \"get\",\n                //   params: this.$http.adornParams()\n                // }).then(({ data }) => {\n                //   this.dataForm = data && data.code === 0 ? data.config : [];\n                // });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init(_x) {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    // 表单提交\n    dataFormSubmit: function dataFormSubmit() {\n      var _this = this;\n\n      this.$refs[\"dataForm\"].validate( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2(valid) {\n          var _ref3, data;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (!valid) {\n                    _context2.next = 6;\n                    break;\n                  }\n\n                  _context2.next = 3;\n                  return ossSaveConfig(_this.dataForm);\n\n                case 3:\n                  _ref3 = _context2.sent;\n                  data = _ref3.data;\n\n                  if (data && data.code === 0) {\n                    _this.$message({\n                      message: \"操作成功\",\n                      type: \"success\",\n                      duration: 1500,\n                      onClose: function onClose() {\n                        _this.visible = false;\n                      }\n                    });\n                  } else {\n                    _this.$message.error(data.msg);\n                  } // this.$http({\n                  //   url: this.$http.adornUrl(\"/sys/oss/saveConfig\"),\n                  //   method: \"post\",\n                  //   data: this.$http.adornData(this.dataForm)\n                  // }).then(({ data }) => {\n                  //   if (data && data.code === 0) {\n                  //     this.$message({\n                  //       message: \"操作成功\",\n                  //       type: \"success\",\n                  //       duration: 1500,\n                  //       onClose: () => {\n                  //         this.visible = false;\n                  //       }\n                  //     });\n                  //   } else {\n                  //     this.$message.error(data.msg);\n                  //   }\n                  // });\n\n\n                case 6:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }\n};",{"version":3,"sources":["oss-config.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwFA,SAAA,SAAA,EAAA,aAAA,QAAA,WAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,QAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,IADA;AAAA,2FACA,EADA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,OAAA,GAAA,IAAA;AAFA;AAAA,uBAGA,SAAA,EAHA;;AAAA;AAAA;AAGA,gBAAA,IAHA,QAGA,IAHA;AAIA,qBAAA,QAAA,GAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,CAAA,GAAA,IAAA,CAAA,MAAA,GAAA,EAAA,CAJA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAaA;AACA,IAAA,cAdA,4BAcA;AAAA;;AACA,WAAA,KAAA,CAAA,UAAA,EAAA,QAAA;AAAA,4EAAA,kBAAA,KAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KADA;AAAA;AAAA;AAAA;;AAAA;AAAA,yBAEA,aAAA,CAAA,KAAA,CAAA,QAAA,CAFA;;AAAA;AAAA;AAEA,kBAAA,IAFA,SAEA,IAFA;;AAGA,sBAAA,IAAA,IAAA,IAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,oBAAA,KAAA,CAAA,QAAA,CAAA;AACA,sBAAA,OAAA,EAAA,MADA;AAEA,sBAAA,IAAA,EAAA,SAFA;AAGA,sBAAA,QAAA,EAAA,IAHA;AAIA,sBAAA,OAAA,EAAA,mBAAA;AACA,wBAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA;AANA,qBAAA;AAQA,mBATA,MASA;AACA,oBAAA,KAAA,CAAA,QAAA,CAAA,KAAA,CAAA,IAAA,CAAA,GAAA;AACA,mBAdA,CAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAjCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAA;;AAAA;AAAA;AAAA;AAAA;AAoCA;AAnDA;AARA,CAAA","sourcesContent":["<template>\n  <el-dialog\n    title=\"云存储配置\"\n    :close-on-click-modal=\"false\"\n    :visible.sync=\"visible\">\n    <el-form :model=\"dataForm\" :rules=\"dataRule\" ref=\"dataForm\" @keyup.enter.native=\"dataFormSubmit()\" label-width=\"120px\" size=\"small\">\n      <el-form-item size=\"mini\" label=\"存储类型\">\n        <el-radio-group v-model=\"dataForm.type\">\n          <el-radio :label=\"1\">七牛</el-radio>\n          <el-radio :label=\"2\">阿里云</el-radio>\n          <el-radio :label=\"3\">腾讯云</el-radio>\n          <el-radio :label=\"4\">本地</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <template v-if=\"dataForm.type === 1\">\n        <el-form-item label=\"域名\">\n          <el-input v-model=\"dataForm.qiniuDomain\" placeholder=\"七牛绑定的域名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路径前缀\">\n          <el-input v-model=\"dataForm.qiniuPrefix\" placeholder=\"不设置默认为空\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"AccessKey\">\n          <el-input v-model=\"dataForm.qiniuAccessKey\" placeholder=\"七牛AccessKey\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"SecretKey\">\n          <el-input v-model=\"dataForm.qiniuSecretKey\" placeholder=\"七牛SecretKey\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"空间名\">\n          <el-input v-model=\"dataForm.qiniuBucketName\" placeholder=\"七牛存储空间名\"></el-input>\n        </el-form-item>\n      </template>\n      <template v-else-if=\"dataForm.type === 2\">\n        <el-form-item label=\"域名\">\n          <el-input v-model=\"dataForm.aliyunDomain\" placeholder=\"阿里云绑定的域名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路径前缀\">\n          <el-input v-model=\"dataForm.aliyunPrefix\" placeholder=\"不设置默认为空\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"EndPoint\">\n          <el-input v-model=\"dataForm.aliyunEndPoint\" placeholder=\"阿里云EndPoint\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"AccessKeyId\">\n          <el-input v-model=\"dataForm.aliyunAccessKeyId\" placeholder=\"阿里云AccessKeyId\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"AccessKeySecret\">\n          <el-input v-model=\"dataForm.aliyunAccessKeySecret\" placeholder=\"阿里云AccessKeySecret\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"BucketName\">\n          <el-input v-model=\"dataForm.aliyunBucketName\" placeholder=\"阿里云BucketName\"></el-input>\n        </el-form-item>\n      </template>\n      <template v-else-if=\"dataForm.type === 3\">\n        <el-form-item label=\"域名\">\n          <el-input v-model=\"dataForm.qcloudDomain\" placeholder=\"腾讯云绑定的域名\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"路径前缀\">\n          <el-input v-model=\"dataForm.qcloudPrefix\" placeholder=\"不设置默认为空\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"AppId\">\n          <el-input v-model=\"dataForm.qcloudAppId\" placeholder=\"腾讯云AppId\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"SecretId\">\n          <el-input v-model=\"dataForm.qcloudSecretId\" placeholder=\"腾讯云SecretId\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"SecretKey\">\n          <el-input v-model=\"dataForm.qcloudSecretKey\" placeholder=\"腾讯云SecretKey\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"BucketName\">\n          <el-input v-model=\"dataForm.qcloudBucketName\" placeholder=\"腾讯云BucketName\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"Bucket所属地区\">\n          <el-input v-model=\"dataForm.qcloudRegion\" placeholder=\"如：sh（可选值 ，华南：gz 华北：tj 华东：sh）\"></el-input>\n        </el-form-item>\n      </template>\n      <template v-else-if=\"dataForm.type === 4\">\n        <el-form-item label=\"路径前缀\">\n          <el-input v-model=\"dataForm.localPrefix\" placeholder=\"不设置默认为空\"></el-input>\n        </el-form-item>\n      </template>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"visible = false\" size=\"small\">取消</el-button>\n      <el-button type=\"primary\" @click=\"dataFormSubmit()\" size=\"small\">确定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport { ossConfig, ossSaveConfig } from \"@/api/sys\";\nexport default {\n  data() {\n    return {\n      visible: false,\n      dataForm: {},\n      dataRule: {}\n    };\n  },\n  methods: {\n    async init(id) {\n      this.visible = true;\n      const { data } = await ossConfig();\n      this.dataForm = data && data.code === 0 ? data.config : [];\n      // this.$http({\n      //   url: this.$http.adornUrl(\"/sys/oss/config\"),\n      //   method: \"get\",\n      //   params: this.$http.adornParams()\n      // }).then(({ data }) => {\n      //   this.dataForm = data && data.code === 0 ? data.config : [];\n      // });\n    },\n    // 表单提交\n    dataFormSubmit() {\n      this.$refs[\"dataForm\"].validate(async valid => {\n        if (valid) {\n          const { data } = await ossSaveConfig(this.dataForm);\n          if (data && data.code === 0) {\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.visible = false;\n              }\n            });\n          } else {\n            this.$message.error(data.msg);\n          }\n\n          // this.$http({\n          //   url: this.$http.adornUrl(\"/sys/oss/saveConfig\"),\n          //   method: \"post\",\n          //   data: this.$http.adornData(this.dataForm)\n          // }).then(({ data }) => {\n          //   if (data && data.code === 0) {\n          //     this.$message({\n          //       message: \"操作成功\",\n          //       type: \"success\",\n          //       duration: 1500,\n          //       onClose: () => {\n          //         this.visible = false;\n          //       }\n          //     });\n          //   } else {\n          //     this.$message.error(data.msg);\n          //   }\n          // });\n        }\n      });\n    }\n  }\n};\n</script>\n\n"],"sourceRoot":"src/views/sys/oss"}]}