{"remainingRequest":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/menu/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/src/views/sys/menu/index.vue","mtime":1584947585008},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/robert/project/vue/UniversalVue/UniversalVue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport TableTreeColumn from \"@/views/sys/menu/components/table-tree-column\";\nimport AddOrUpdate from \"./components/menu-add-or-update\";\nimport { treeDataTranslate } from \"@/utils\";\nimport { menuList, menuDelete } from \"@/api/sys\";\n\nexport default {\n  data() {\n    return {\n      dataForm: {},\n      dataList: [],\n      dataListLoading: false,\n      addOrUpdateVisible: false\n    };\n  },\n  components: {\n    TableTreeColumn,\n    AddOrUpdate\n  },\n  // activated() {\n  //   this.getDataList();\n  // },\n  methods: {\n    // 获取数据列表\n    async getDataList() {\n      this.dataListLoading = true;\n      const { data } = await menuList();\n      this.dataList = treeDataTranslate(data, \"menuId\");\n      this.dataListLoading = false;\n    },\n    // 新增 / 修改\n    addOrUpdateHandle(id) {\n      this.addOrUpdateVisible = true;\n      this.$nextTick(() => {\n        this.$refs.addOrUpdate.init(id);\n      });\n    },\n    // 删除\n    deleteHandle(id) {\n      this.$confirm(`确定进行删除操作?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(async () => {\n          const { data } = await menuDelete(`/sys/menu/delete/${id}`);\n          if (data && data.code === 0) {\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.getDataList();\n              }\n            });\n          } else {\n            this.$message.error(data.msg);\n          }\n        })\n        .catch(() => {});\n    }\n  },\n  mounted() {\n    this.getDataList();\n  }\n};\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/sys/menu","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form :inline=\"true\" :model=\"dataForm\" size=\"small\">\n      <el-form-item>\n        <el-button v-if=\"isAuth('sys:user:save')\" type=\"primary\" @click=\"addOrUpdateHandle()\">新增</el-button>\n      </el-form-item>\n    </el-form>\n    <el-table\n      v-loading=\"dataListLoading\"\n      :data=\"dataList\"\n      border\n      style=\"width: 100%;\"\n      size=\"small\">\n      <table-tree-column\n        prop=\"name\"\n        header-align=\"center\"\n        treeKey=\"menuId\"\n        width=\"150\"\n        label=\"名称\">\n      </table-tree-column>\n      <el-table-column\n        prop=\"parentName\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"120\"\n        label=\"上级菜单\">\n      </el-table-column>\n      <el-table-column\n        header-align=\"center\"\n        align=\"center\"\n        label=\"图标\">\n        <template slot-scope=\"scope\">\n          <svg-icon :icon-class=\"scope.row.icon || ''\"></svg-icon>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"type\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"类型\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.type === 0\" size=\"small\">目录</el-tag>\n          <el-tag v-else-if=\"scope.row.type === 1\" size=\"small\" type=\"success\">菜单</el-tag>\n          <el-tag v-else-if=\"scope.row.type === 2\" size=\"small\" type=\"info\">按钮</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column\n        prop=\"orderNum\"\n        header-align=\"center\"\n        align=\"center\"\n        label=\"排序号\">\n      </el-table-column>\n      <el-table-column\n        prop=\"url\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        :show-overflow-tooltip=\"true\"\n        label=\"菜单URL\">\n      </el-table-column>\n      <el-table-column\n        prop=\"perms\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        :show-overflow-tooltip=\"true\"\n        label=\"授权标识\">\n      </el-table-column>\n      <el-table-column\n        fixed=\"right\"\n        header-align=\"center\"\n        align=\"center\"\n        width=\"150\"\n        label=\"操作\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"text\" size=\"small\" @click=\"addOrUpdateHandle(scope.row.menuId)\">修改</el-button>\n          <el-button type=\"text\" size=\"small\" @click=\"deleteHandle(scope.row.menuId)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <!-- 弹窗, 新增 / 修改 -->\n    <add-or-update v-if=\"addOrUpdateVisible\" ref=\"addOrUpdate\" @refreshDataList=\"getDataList\"></add-or-update>\n  </div>\n</template>\n\n<script>\nimport TableTreeColumn from \"@/views/sys/menu/components/table-tree-column\";\nimport AddOrUpdate from \"./components/menu-add-or-update\";\nimport { treeDataTranslate } from \"@/utils\";\nimport { menuList, menuDelete } from \"@/api/sys\";\n\nexport default {\n  data() {\n    return {\n      dataForm: {},\n      dataList: [],\n      dataListLoading: false,\n      addOrUpdateVisible: false\n    };\n  },\n  components: {\n    TableTreeColumn,\n    AddOrUpdate\n  },\n  // activated() {\n  //   this.getDataList();\n  // },\n  methods: {\n    // 获取数据列表\n    async getDataList() {\n      this.dataListLoading = true;\n      const { data } = await menuList();\n      this.dataList = treeDataTranslate(data, \"menuId\");\n      this.dataListLoading = false;\n    },\n    // 新增 / 修改\n    addOrUpdateHandle(id) {\n      this.addOrUpdateVisible = true;\n      this.$nextTick(() => {\n        this.$refs.addOrUpdate.init(id);\n      });\n    },\n    // 删除\n    deleteHandle(id) {\n      this.$confirm(`确定进行删除操作?`, \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(async () => {\n          const { data } = await menuDelete(`/sys/menu/delete/${id}`);\n          if (data && data.code === 0) {\n            this.$message({\n              message: \"操作成功\",\n              type: \"success\",\n              duration: 1500,\n              onClose: () => {\n                this.getDataList();\n              }\n            });\n          } else {\n            this.$message.error(data.msg);\n          }\n        })\n        .catch(() => {});\n    }\n  },\n  mounted() {\n    this.getDataList();\n  }\n};\n</script>\n"]}]}